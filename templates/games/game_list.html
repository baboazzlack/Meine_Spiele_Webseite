{% extends "base.html" %}
{% load static %}

{% block title %}Spiele - GFN Retro Hub{% endblock %}

{% block content %}
<main class="main-content">
    <h2>Wähle dein Abenteuer!</h2>
    <p>Jede Karte ist ein Portal in eine andere Dimension des Spaßes. Klicke, um zu starten.</p>

    <audio id="select-sound" src="{% static 'sounds/select_sound.wav' %}" preload="auto"></audio>

    <div class="game-grid">
        <div class="game-card">
            <a href="{% url 'games:space_invaders' %}" class="game-link">
                <h3>Space Invaders</h3>
                <p>Verteidige die Erde gegen die unerbittliche Alien-Invasion von oben!</p>
            </a>
        </div>
        
        <div class="game-card">
            <a href="{% url 'games:pacman' %}" class="game-link">
                <h3>Pac-Man</h3>
                <p>Friss die Punkte, jage die Geister und navigiere durch das Labyrinth.</p>
            </a>
        </div>

        <div class="game-card">
            <a href="{% url 'games:super_breakout' %}" class="game-link">
                <h3>Super Breakout</h3>
                <p>Ein moderner Klon des Arcade-Klassikers. Zerstöre alle Blöcke mit Ball und Paddel.</p>
            </a>
        </div>
        
        <div class="game-card">
            <a href="{% url 'games:tetris' %}" class="game-link">
                <h3>Tetris</h3>
                <p>Die Blöcke fallen! Ordne sie in Reihen an, bevor der Stapel die Decke erreicht.</p>
            </a>
        </div>

        <div class="game-card">
            <a href="{% url 'games:snake' %}" class="game-link">
                <h3>Snake</h3>
                <p>Der unsterbliche Klassiker. Werde länger, aber beiß dir nicht in den eigenen Schwanz.</p>
            </a>
        </div>

        <div class="game-card">
            <a href="{% url 'games:pong' %}" class="game-link">
                <h3>Pong</h3>
                <p>Der Urvater aller Videospiele. Fordere die KI in diesem Duell der Reflexe heraus.</p>
            </a>
        </div>

        <div class="game-card">
            <a href="{% url 'games:whack_a_mole' %}" class="game-link">
                <h3>Whack-a-Mole</h3>
                <p>Stelle deine Reflexe auf die Probe! Schlage die Aliens, sobald sie auftauchen.</p>
            </a>
        </div>

        <div class="game-card">
            <a href="{% url 'games:hangman' %}" class="game-link">
                <h3>Galgenmännchen</h3>
                <p>Errate das Wort, bevor die Zeit abläuft und das Strichmännchen komplett ist.</p>
            </a>
        </div>
        
        <div class="game-card">
            <a href="{% url 'games:tic_tac_toe' %}" class="game-link">
                <h3>Tic-Tac-Toe</h3>
                <p>Drei gewinnt! Kannst du die künstliche Intelligenz in diesem zeitlosen Duell schlagen?</p>
            </a>
        </div>

        <div class="game-card">
            <a href="{% url 'games:rock_paper_scissors' %}" class="game-link">
                <h3>Schere-Stein-Papier</h3>
                <p>Ein Duell des Glücks und der Psychologie. Wähle weise deine Waffe.</p>
            </a>
        </div>
        
        <div class="game-card">
            <a href="{% url 'games:guess_the_number' %}" class="game-link">
                <h3>Zahlen Raten</h3>
                <p>Der Computer hat eine Zahl, du hast deinen Verstand. Wer gewinnt das Logik-Duell?</p>
            </a>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const gameCards = document.querySelectorAll('.game-card');
        const selectSound = document.getElementById('select-sound');

        if (!selectSound) {
            console.error("Audio-Element mit der ID 'select-sound' wurde nicht gefunden.");
            return;
        }

        gameCards.forEach(card => {
            card.addEventListener('click', (event) => {
                event.preventDefault(); 
                
                selectSound.currentTime = 0;
                selectSound.play().catch(e => console.error("Sound konnte nicht abgespielt werden:", e));

                const targetUrl = card.querySelector('a.game-link').href;
                
                setTimeout(() => {
                    window.location.href = targetUrl;
                }, 250);
            });
        });
    });
</script>
{% endblock %}